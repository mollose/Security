# The Rootkit Arsenal

## 목차

</br>

## Hardware Briefing
프로세서에 의해 메모리가 논리적으로 구성되는데 있어 두 가지 scheme 존재
* Flat Memory Model : physical model과 달리 추상적인 모델로서, 메모리를 인접한 바이트들의 연속으로 나타냄(0으로 시작하고 N(IA-32의 경우 2<sup>32</sup> - 1)으로 끝나는 주소로 표현). 특정 바이트의 주소를 선형 주소로 부르며, 가능한 바이트들의 전체 범위를 선형 주소 공간이라 부름. Flat Memory Model은 물리 메모리와 거의 동일하지만 항상 그러한 것은 아닌데, 예를 들어 전체 메모리 보호 체계 수립 시 선형 주소가 물리 메모리와 전혀 유사하지 않은 전체 주소 변환 과정 중에 사용될 수 있음
* Segmented Memory Model : 메모리는 세그먼트로 불리는, 구분되는 영역들의 관점에서 보여짐. 특정 세그먼트 내에 위치하는 바이트는 논리 주소에 의해 지정됨. 논리 주소(far pointer)는 두 부분으로 나뉘는데, 참조되는 세그먼트를 결정하는 segment selector와 세그먼트 내에서의 바이트의 위치를 명시하는 effective address가 바로 그것. segment selector와 effective address의 실제 내용은 주소 변환 체계마다 다를 수 있음

IA-32 프로세서에는 액세스를 위한 32개의 address line들 외에도, 물리 메모리에 접근하고 이를 업데이트하기 위한 제어 버스와 데이터 버스 존재. 제어(32비트 데이터 청크) 버스는 프로세스가 메모리에 쓰기, 읽기를 원하는지를 나타내며 데이터 버스는 프로세서와 메모리 간 데이터를 주고받는데 사용됨(IA-32 프로세서는 한 번에 4바이트 데이터를 읽고 쓸 수 있음)
* 읽기 동작 : 프로세서의 address line 주소 세팅 ⇒ 제어 버스로 읽기 신호 보냄 ⇒ RAM 칩에서 데이터 버스로 요청된 바이트 반환
* 쓰기 동작 : 프로세서의 address line 주소 세팅 ⇒ 제어 버스로 쓰기 신호 보냄 ⇒ 프로세서에서 데이터 버스로 쓰일 바이트 전송
* Address line은 프로세서를 RAM 칩과 연결하는 선의 집합으로 각 address line은 각 바이트(IA-32 계열 프로세서는 물리 주소를 사용해 물리 메모리상의 각 8비트 바이트에 접근)의 주소의 단일 비트를 명시. IA-32 프로세서는 기본적으로 32개의 address line들을 사용하며 이는 최대 4GB 물리 주소 공간을 나타낼 수 있음. IA-32 프로세서에서 물리 주소 확장(PAE) 기능을 사용하면 52개의 address line까지 사용 가능
